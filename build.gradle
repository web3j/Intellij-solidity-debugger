plugins {
    id 'java'
    id "org.jetbrains.intellij" version "1.1.6"
    id 'org.jetbrains.kotlin.jvm' version '1.4.30'
}


repositories {
    jcenter()
    mavenCentral()
    maven {
        url = uri("https://hyperledger.jfrog.io/hyperledger/besu-maven")
    }
}


dependencies {
    implementation fileTree(dir: 'libs', include: ['log4j-api-3.0.0-SNAPSHOT.jar'])

    implementation 'com.beust:klaxon:5.5'
    implementation 'org.jetbrains.kotlin:kotlin-stdlib:1.5.21'
    implementation 'org.jetbrains.kotlin:kotlin-reflect:1.5.21'
    implementation "org.web3j:core:4.8.4"
    implementation "org.web3j:web3j-evm:4.8.5"

    implementation "org.hyperledger.besu:plugin-api:$besuPluginVersion"
    implementation "org.hyperledger.besu.internal:api:$besuInternalVersion"
    implementation "org.hyperledger.besu.internal:config:$besuInternalVersion"
    implementation "org.hyperledger.besu.internal:core:$besuInternalVersion"
    implementation "org.hyperledger.besu.internal:crypto:$besuInternalVersion"
    implementation "org.hyperledger.besu.internal:rlp:$besuInternalVersion"
    implementation "org.hyperledger.besu.internal:kvstore:$besuInternalVersion"
    implementation "org.hyperledger.besu.internal:metrics-core:$besuInternalVersion"
    implementation "org.hyperledger.besu.internal:trie:$besuInternalVersion"
    implementation "org.hyperledger.besu.internal:util:$besuInternalVersion"
    implementation "org.hyperledger.besu:bls12-381:$besuCryptoDepVersion"

    testImplementation "org.mockito:mockito-core:$mockitoVersion"
    testImplementation "org.junit.jupiter:junit-jupiter-api:$junitVersion"
    testRuntimeOnly "org.junit.jupiter:junit-jupiter-engine:$junitEngineVersion"
}

configurations {
    all {
        //exclude group:"org.slf4j", module:"slf4j-api"
        //exclude group:"org.apache.logging.log4j", module:"slf4j-to-log4j12"
        //exclude group:"org.apache.logging.log4j", module:"log4j-api"
    }
}


// See https://github.com/JetBrains/gradle-intellij-plugin/

intellij {
    pluginName = 'Intellij solidity debugger'
    version = '2020.3.2'
    downloadSources = true
    dependencies {
        compileOnly fileTree(dir: 'libs', include: ['intellij-solidity-2.3.6-SNAPSHOT.jar'])
    }
    plugins = [
            "java", //Required for com.intellij.execution.CommonJavaRunConfigurationParameters
            "me.serce.solidity:2.3.5",
    ]
}
compileKotlin {
    kotlinOptions.jvmTarget = "11"
}


test {
    useJUnitPlatform()
}
